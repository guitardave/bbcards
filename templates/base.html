{% load static %}
{% load django_htmx %}
{% load django_bootstrap_breadcrumbs %}
<!DOCTYPE html>
{% if request.COOKIES.toggle_mode and request.COOKIES.toggle_mode == 'dark' %}
    <html lang="en" data-bs-theme="dark">
{% else %}
    <html lang="en" data-bs-theme="">
{% endif %}
<head>
	<!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="shortcut icon" type="image/png" href="{% static 'images/favicon.png' %}" >

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- FontAwesome -->
    <link rel="stylesheet" type="text/css" href="{% static 'cards/font-awesome.min.css' %}">

    <!-- JQUERY -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
    <link href="{% static 'pub/jquery-ui/jquery-ui.min.css' %}" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

    <!-- HTMX -->
    <script src="{% static 'js/htmx/htmx.min.js' %}" defer></script>
    {% django_htmx_script %}

    <link rel="stylesheet" href="{% static 'pub/css/main.css' %}">
    <link rel="stylesheet" href="{% static 'pub/css/custom.css' %}">

    {% if title %}
		<title>BBCards: {{ title }}</title>
	{% else %}
		<title>BBCards</title>
	{% endif %}
</head>

<body>
	{% include 'header.html' %}
	<main role="main" class="container">
        <p>&nbsp;</p>
        {% block breadcrumbs %}
            {% clear_breadcrumbs %}
            {% breadcrumb "Home" "/" %}
        {% endblock breadcrumbs %}

      <div class="row">
        <div class="col-md-12">
            <p class="p_short">&nbsp;</p>
            <p class="p_short">&nbsp;</p>
            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }} alert-dismissable">{{ message }}</div>
                {% endfor %}
            {% endif %}

            {% block content %}
                {% render_breadcrumbs %}
            {% endblock %}
        </div>
      </div>

    </main>
    <div class="container">
        <hr>
        <footer class="site-footer">
            <p>
                <small class="text-muted">BBCARDS, JOJODAVE &copy; DC 2021-{{ copyright_year }}</small>
            </p>
        </footer>
    </div>
    <script>
        $(document).ready(function () {
            $("#myInput").on("keyup", function () {
                let value = $(this).val().toLowerCase();
                $("#myTable tr").filter(function () {
                    $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1);
                });
                $('#n-results').html($('tr:visible').length-1 + ' rows')
            });
        });

        $('#toggle-link').on('click', function () {
            let html_tag = $('html');
            let mode = html_tag.data('bs-theme');
            let this_mode = mode ? null : 'dark';
            html_tag.attr('data-bs-theme', this_mode);
            $.ajax({
                url: '/users/toggle_mode/'+this_mode+'/',
                type: 'GET',
                success: function(res) {
                    $('#toggle-mode').html(res);
                }
            })
        });
    </script>
</body>
</html>
